<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>KWIC KWOC KWAC</title>
	<link rel="stylesheet" href="//stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
		integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link href="//cdnjs.cloudflare.com/ajax/libs/open-iconic/1.1.1/font/css/open-iconic-bootstrap.min.css"
		rel="stylesheet">
	<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
	<link href="/kwic.css" rel="stylesheet">
	<link href="/util.css" rel="stylesheet">
	<link href="/script.css" rel="stylesheet">
	<link href="/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
</head>

<body>
	<div id="wrapper">
		<nav id="top" class="navbar navbar-expand-md navbar-dark bg-dark  disable-select">
			<a class="navbar-brand" href="/">KWIC KWOC KWAC</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse"
				aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarCollapse">
				<ul class="navbar-nav mr-auto">
					<li class="nav-link active nav-item"><span class="d-inline-block">
						<span class="oi oi-magnifying-glass"></span>
					</li>
					<li class="nav-item dropdown active">
						<!--<a class="nav-link dropdown-toggle" href="#" id="fileList" data-toggle="dropdown"
							aria-haspopup="true" aria-expanded="false">Documenti</a>-->
						<input class="nav-link dropdown-toggle" type="text" id="fileList" data-toggle="dropdown" 
							aria-haspopup="true" aria-expanded="false" onkeyup="filterDocuments()" placeholder="Cerca documenti">
						<div id="fileMenu" class="dropdown-menu overflow-auto" aria-labelledby="fileList">
						</div>
					</li>
					<li class="nav-item dropdown active d-none" id="commandList">
						<a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown"
							aria-haspopup="true" aria-expanded="false">Operazioni</a>
						<div id="commandMenu" class="dropdown-menu" aria-labelledby="dropdown01">
							<a class="dropdown-item" href="#" onclick='toggleStyles()'>Mostra annotazioni</a>
							<a id="metadata-toggle"class="dropdown-item" href="#" data-toggle="modal"
								data-target="#add-metadata">Aggiungi Metadati</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" href="#" onclick="downloadDoc('html')">Scarica HTML</a>
							<a class="dropdown-item" href="#" onclick="downloadDoc('tei')">Scarica TEI</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" href="#" onclick="exportEntities('JSON')">Esporta entità in JSON</a>
							<a class="dropdown-item" href="#" onclick="exportEntities('CSV')">Esporta entità in CSV</a>
							<a class="dropdown-item editOnly" href="#" role="button" data-toggle="modal"
								data-target="#EntityUpload">Importa entità</a>
							<div class="dropdown-divider"></div>
							<a class="dropdown-item editOnly" href="#" onclick="emptyTrash()">Svuota cestino</a>
						</div>
					</li>
				</ul>
				<ul class="navbar-nav mr-auto">
					<li class="nav-item active editOnly" id="saveButton">
						<a class="nav-link" href="#" role="button" onClick="saveDoc()"><span class="oi oi-folder"
								title="Save document" aria-hidden="true"></span> <span>Salva documento</span></a>
					</li>
				</ul>
				<ul class="navbar-nav my-2 my-lg-0">
					<li class="nav-item active" id="uploadButton">
						<a class="nav-link editOnly" href="#" role="button" data-toggle="modal"
							data-target="#FileUpload"><span class="oi oi-cloud-upload"
								title="Upload local HTML document" aria-hidden="true"></span> <span
								class="sr-only">Carica documento</span></a>
					</li>
					<li class="nav-item active" id="editButton">
						<a class="nav-link" id="edit-mode" href="#" role="button" onclick="toggleEdit()"><span
								class="oi oi-pencil" title="Switch to edit mode" aria-hidden="true"></span> <span
								class="sr-only">Modifica documento</span></a>
					</li>
					<li class="nav-item dropdown active"> 
						<a class="nav-link dropdown-toggle" href="#" id="user-options" data-toggle="dropdown" 
						aria-haspopup="true" aria-expanded="false"><span
								class="oi oi-person" title="User preferences" aria-hidden="true"></span>
							<span class="sr-only">Utente</span>
						</a>
						<div id="user-menu" class="dropdown-menu dropdown-menu-right" aria-labelledby="user-options">
							<a id="change-password-option"class="dropdown-item" href="#" data-toggle="modal" data-target="#change-password">Cambia password</a>
							<a id="logout-option" class="dropdown-item" href="#" data-toggle="modal"
								data-target="#logout">Esci</a>
						</div>
					</li>
					<li class="nav-item active">
							<a class="nav-link" href="#" role="button" data-toggle="modal" data-target="#documentation"><span
									class="oi oi-book border-light rounded-circle"
									title="Documentation" aria-hidden="true"></span> <span class="sr-only">Documentazione</span></a>
					</li>
					<li class="nav-item active">
						<a class="nav-link" href="#" role="button" data-toggle="modal" data-target="#about"><span
								class="oi oi-question-mark border-light rounded-circle"
								title="Info about KWIC KWOC KWAC" aria-hidden="true"></span> <span class="sr-only">Informazioni</span></a>
					</li>
				</ul>
			</div>
		</nav>
		<div id="main">
			<div class="d-flex flex-column h-100" id="main">
				<div id="spinner"></div>
				<div class="row h-100">
					<div class="col-3 h-100 pr-1 fs-3 mt-2 disable-select" id="left">
						<div class="row h-50 pb-5" id="topPane">
							<div class="col-12 h-100 pr-0 mb-4">
								<ul class="nav nav-tabs  mr-auto" id="categoryTab" role="tablist">
								</ul>
								<div class="tab-content d-flex flex-column h-100" id="categoryPane">
								</div>
							</div>
						</div>
						<div class="row h-50 pb-5" id="bottomPane">
							<div class="col-12 h-100 pr-0 mb-0">
								<ul class="nav nav-tabs" id="otherTab" role="tablist">
									<li class="nav-item dropPoint" data-level="scraps" data-id="scraps">
										<a class="nav-link active" id="scraps-realtab" data-toggle="tab"
											href="#scraps-realpane" role="tab" aria-controls="scrapsPane"
											aria-selected="true">Scarti</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" id="info-tab" data-toggle="tab" href="#infoPane" role="tab"
											aria-controls="infoPane" aria-selected="false">Info</a>
									</li>
									<li class="nav-item ml-auto pointer dropPoint" data-level="trash" data-id="trash">
										<a class="nav-link" id="trash-realtab" data-toggle="tab"
											data-target="#trash-realpane">
											<span class="oi oi-trash" title="Trash pane" aria-hidden="true"></span>
											<span class="sr-only">Cestino</span>
										</a>
									</li>
								</ul>
								<div class="tab-content d-flex flex-column h-100" id="otherPanes" data-level="scraps"
									data-id="scraps">
									<div class="tab-pane scroll-col active ug-border ug-border-notop dropPoint h-100"
										id="scraps-realpane" role="tabpanel" aria-labelledby="scraps-realtab"
										data-level="scraps" data-id="scraps">
										<ul></ul>
									</div>
									<div class="tab-pane ug-border ug-border-notop scroll-col h-100" id="infoPane"
										role="tabpanel" aria-labelledby="info-tab">
										<h1>Info</h1>
									</div>
									<div class="tab-pane ug-border ug-border-notop dropPoint h-100" id="trash-realpane"
										role="tabpanel" aria-labelledby="trash-tab" data-level="trash" data-id="trash">
										<ul></ul>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-9 fs-9 h-100" id="right">
						<div id="nav-container">
							<nav id="tools" class="navbar  navbar-expand-md border ml-2 my-0 editOnly bg-light">
								<div class="btn-group-vertical btn-group-toggle mr-2" data-toggle="buttons">
									<label class="btn btn-secondary active btn-sm">
										<input type="radio" name="options" id="option1" autocomplete="off"
											onclick="showMentions()" checked> Menzioni
									</label>
									<label class="btn btn-secondary btn-sm">
										<input type="radio" name="options" id="option2" autocomplete="off"
											onclick="showReferences()"> Riferimenti
									</label>
								</div>
								<div id="categoriesButton" class="btn-group mr-auto" role="group"
									aria-label="Basic example">
								</div>
								<div id="referencesButton" class="btn-group mr-auto" role="group"
									aria-label="References" style="display:none">
								</div>
								<div class="btn-group-toggle my-2 my-lg-0 mx-3 ">
									<label class="small" title="Pressing ALT inverts behaviour">
										Estendi selezione a parola intera (ALT or ⌥)
										<span class="switch">
											<input type="checkbox" checked onchange="prefs('extend', this.checked)">
											<span class="slider round"></span>
										</span>
									</label>
									<label class="small" title="Pressing SHIFT inverts behaviour">
										Evidenzia tutte le istanze (⇧)
										<span class="switch">
											<input id="markAll" type="checkbox" checked onchange="prefs('markAll', this.checked)">
											<span class="slider round"></span>
										</span>
									</label>
									<label class="small" title="Chenge the document status to working, done, default">
										Stato della marcatura
									</label>
									<button id="status" type="button" class="btn btn-primary btn-sm" 
											onclick="changeStatus()"></button>
								</div>
							</nav>
						</div>
						<div id="footnote-alert" class="alert alert-info alert-dismissible fade show"
							style="display:none" role="alert">
							<button type="button" class="close" data-dismiss="alert" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div id="file" status="default" data-path="default" class="h-100 scroll-col">
							<div class="jumbotron" id="title">
								<h1>Key Words In Context</h1>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Modals -->
	<div class="modal fade" id="change-password" tabindex="-1" role="dialog" aria-labelledby="changePassword" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="changePassword">Cambia password</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div id="msg-change" class="alert" role="alert" style="display:none"></div>
					<p>Inserire due volte la nuova password per cambiarla.</p>
					<form id="change-password-form">
						<div class="form-group">
						<div id="new-password-input" class="input-group">
							<input id="new-password" class="form-control" type="password" placeholder="Nuova password">
							<div class="input-group-append">
									<a class="input-group-text" id="new-password-eye" href="" onclick="show_hide(this)">
										<i class="fa fa-eye-slash" aria-hidden="true"></i>
									</a>
							</div>
						</div>
						<small class="form-text text-muted">La nuova password deve contenere almeno 6 caratteri</small>

						</div>
						<div class="form-group">
						<div id="confirm-password-input" class="input-group">
							<input id="confirm-password" class="form-control" type="password" placeholder="Ripeti password">
							</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<div class="float-right">
						<button type="button" class="btn btn-primary"
							onclick="change_password()">Salva</button>
					</div>
					</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="logout" tabindex="-1" role="dialog" aria-labelledby="logoutLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="logoutLabel">Esci</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<p>Desideri uscire dall'applicazione?</p>
				</div>
				<div class ="modal-footer">
					<div class="float-right">
						<button type="button" class="btn btn-primary" data-dismiss="modal"
							onclick="logout()">Si</button>
						<button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="documentation" tabindex="-1" role="dialog" aria-labelledby="documentationLabel" aria-hidden="true">
			<div class="modal-dialog modal-xl" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="documentationLabel">Documentazione</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<h3>Informazioni principali</h3>
						<h2 style="padding-left: 80px">Caricare e salvare il documento</h2>
						<div class="row">
							<div class="col-4" style="padding-left: 100px">
								<p>Clicca su <strong>Documenti</strong> e seleziona il documento su cui vuoi lavorare.</p>
								<p>Il pallino colorato che affianca il titolo del documento indica lo <em>stato di marcatura</em> di quel documento.</p>
								<p>Puoi salvare il documento in qualsiasi momento cliccando su <strong>Salva documento</strong>.</p>
							</div>
							<div class="col-8" style="text-align: center">
								<iframe width="560" height="315" src="https://www.youtube.com/embed/xe8_PQ0IcdQ" frameborder="2" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
							</div>
						</div>
						<h2 style="padding-left: 80px">Cambiare lo stato di marcatura</h2>
						<div class="row">
							<div class="col-4" style="padding-left: 100px">
								<p>Clicca sul bottone <strong>Stato della marcatura</strong> per indicare l'avanzamento dello stato dei lavori. Ogni volta che clicchi lo stato di marcatura cambia ordinatamente secondo tre possibili stati: <button type="button" class="btn btn-primary">Da avviare</button>, <button type="button" class="btn btn-warning">In corso</button> e <button type="button" class="btn btn-success">Terminato</button></p>
								<p>È essenziale segnalare lo stato di marcatura per ogni documento, così da poter ottimizzare il flusso di lavoro e iniziare a rivedere e poi inserire mano a mano i documenti terminati nell'edizione.</p>
							</div>
							<div class="col-8" style="text-align: center">
								<iframe width="560" height="315" src="https://www.youtube.com/embed/_ITOh8SXjhU" frameborder="2" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
							</div>
						</div>
						<h2 style="padding-left: 80px">Marcare</h2>
						<div class="row">
							<div class="col-4" style="padding-left: 100px">
								<p>Seleziona la parte del testo d'interesse (es. <samp>Democrazia Cristiana</samp>) e clicca sulla rispettiva categoria (<samp>Organizzazioni</samp>).</p>
								<p>Le categorie sono suddivise in due tipologie principali:</p>
								<ul>
									<li>Menzioni: Persone, Luoghi, Organizzazioni</li>
									<li>Riferimenti: Riferimenti bibliografici, Citazioni</li>
								</ul>
								<p>Puoi trovare tutti gli elementi del testo che hai marcato nella sezione a sinistra dello schermo.</p>
							</div>
							<div class="col-8" style="text-align: center">
								<iframe width="560" height="315" src="https://www.youtube.com/embed/NUqBDC0DxE8" frameborder="2" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
							</div>
						</div>
						<h2 style="padding-left: 80px">Allineamento con Wikidata</h2>
						<div class="row">
							<div class="col-4" style="padding-left: 100px">
								<p>Clicca sull'<strong>icona a forma di segno più</strong> (<span class="oi oi-plus"></span>) situata a destra dell'elemento per rivelarne dettagli aggiuntivi.</p>
								<p>Alla voce <strong>Wikidata ID</strong> clicca sull'<strong>icona a forma di lente di ingrandimento</strong> (<span class="oi oi-magnifying-glass"></span>). La tendina che si apre contiene una lista di possibili riferimenti all'elemento del testo presenti sul Web. Di solito l'opzione corretta è la prima, ma cerca comunque di prestare attenzione.</p>
							</div>
							<div class="col-8" style="text-align: center">
								<iframe width="560" height="315" src="https://www.youtube.com/embed/-a-j8xCH5r0" frameborder="2" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
							</div>
						</div>
						<br>
						<div class="row">
							<div class="col-4" style="padding-left: 100px">
								<p>Se non trovi l'opzione corretta o se non c'è nessun risultato (es. il solo cognome di una persona), prova a modificare <strong>l'etichetta</strong> dell'elemento inserendo un valore completo (es. nome e cognome della persona).</p>
								<p>È essenziale che ci siano quanti più elementi possibili allineati con Wikidata. Questo ci permetterà di arricchire ulteriormente gli elementi da te marcati in maniera automatica, alleggerendo considerevolmente il tuo e il nostro lavoro.</p>
							</div>
							<div class="col-8" style="text-align: center">
								<iframe width="560" height="315" src="https://www.youtube.com/embed/_0h55WqztLg" frameborder="2" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
							</div>
						</div>
						<h2 style="padding-left: 80px">Integrare gli elementi</h2>
						<div class="row">
							<div class="col-4" style="padding-left: 100px">
								<p>Elementi del testo diversi possono riferirsi allo stesso concetto (es. <samp>Democrazia Cristiana</samp> e <samp>D.C.</samp>).</p>
								<p>In questo caso devi integrare un elemento con l'altro. Prima seleziona gli elementi del testo e marcali come indicato in precedenza. Nella sezione a sinistra dello schermo, clicca su un elemento e, tenendolo selezionato, trascinalo all'interno dell'altro.</p>
							</div>
							<div class="col-8" style="text-align: center">
								<iframe width="560" height="315" src="https://www.youtube.com/embed/MWJOOQHIBb8" frameborder="2" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
							</div>
						</div>
						<br>
						<div class="row">
							<div class="col-4" style="padding-left: 100px">
								<p>Se un elemento del testo si riferisce allo stesso concetto in maniera generica (es. <samp>Paese</samp>), per segnalare che si tratta di una menzione o un riferimento generici devi prime cliccare sull'elemento per aprire la lista di istanze e poi cliccare due volte sulle istanze che rappresentano menzioni o riferimenti generici a quell'entità.</p>
							</div>
							<div class="col-8" style="text-align: center">
								<iframe width="560" height="315" src="https://www.youtube.com/embed/oJL1VvTWPL4" frameborder="2" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
							</div>
						</div>
						<h2 style="padding-left: 80px">Eliminare uno o più elementi</h2>
						<div class="row">
							<div class="col-4" style="padding-left: 100px">
								<p>Clicca sull'elemento che desideri eliminare e, tenendo cliccato, trascinalo nella sezione in basso contrassegnata da un'icona a forma di cestino.</p>
								<p>Clicca su <strong>Operazioni</strong> e seleziona l'opzione <strong>Svuota cestino</strong>. Conferma di voler completare l'operazione per cancellare tutti gli elementi presenti nel cestino.</p>
							</div>
							<div class="col-8" style="text-align: center">
								<iframe width="560" height="315" src="https://www.youtube.com/embed/Dpo8mYY-ucc" frameborder="2" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
							</div>
						</div>
						<h2 style="padding-left: 80px">Inserire i metadati</h2>
						<div class="row">
							<div class="col-4" style="padding-left: 100px">
								<p>Clicca su <strong>Operazioni</strong> e seleziona l'opzione <strong>Aggiungi metadati</strong>.</p>
								<p>Nel modulo potrai trovare tutte le informazioni necessarie alla sua compilazione.</p>
								<p>I metadati contrassegnati da un asterisco (<strong>*</strong>) sono obbligatori.</p>
								<p>Una volta inseriti i metadati, clicca su <strong>Aggiorna</strong> per salvarli.</p>
							</div>
							<div class="col-8" style="text-align: center">
								<iframe width="560" height="315" src="https://www.youtube.com/embed/KB-gn75e3Lc" frameborder="2" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
							</div>
						</div>						
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary" data-dismiss="modal">Ok</button>
					</div>
				</div>
			</div>
	</div>
	<div class="modal fade" id="about" tabindex="-1" role="dialog" aria-labelledby="aboutLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="aboutLabel">KWIC KWOC KWAC</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<p>Un programma per visualizzare e modificare documenti digitali.</p>
					<p class="text-center"><img src="/kwickwockwac.jpg" alt="an image of kwic, kwoc and kwac"
							title="The three nephews of Paperinik"></p>
					<p>© 2020 Fabio Vitali. All rights reserved.</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">Ok</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="prefs" tabindex="-1" role="dialog" aria-labelledby="prefsLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="prefsLabel">Preferenze</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<form>
						<div class="form-group row">
							<label for="widthControlRange" class="col-6">Dimensioni colonna sinistra:</label>
							<span class="rangeExtreme col-1 p-0 pr-1">piccola</span>
							<input type="range" class="form-control-range col-3" id="widthControlRange" min="2" max="10"
								value="4" step="1" onchange="prefs('width',this.value)">
							<span class="rangeExtreme col-1 p-0 pl-1">grande</span>
						</div>
						<div class="form-group row">
							<label for="heightControlRange" class="col-6">Dimensioni pannello delle entità:</label>
							<span class="rangeExtreme col-1 p-0 pr-1">piccolo</span>
							<input type="range" class="form-control-range col-3" id="heightControlRange" min="20"
								max="100" value="50" step="10" onchange="prefs('height',this.value)">
							<span class="rangeExtreme col-1 p-0 pl-1">grande</span>
						</div>
						<div class="form-group row">
							<div class="col-6">Ordina entità:</div>
							<div id="formStyleGroup" class="btn-group col-5 btn-group-toggle" data-toggle="buttons"
								role="group" aria-label="Choose Sort">
								<label class="btn btn-primary" id="pref-alpha">
									<input type="radio" name="sort" autocomplete="off" value="alpha"
										onclick="prefs('sort',this.value)">Alfa
								</label>
								<label class="btn btn-primary" id="pref-count">
									<input type="radio" name="sort" autocomplete="off" value="count"
										onclick="prefs('sort',this.value)">Conto
								</label>
								<label class="btn btn-primary" id="pref-position">
									<input type="radio" name="sort" autocomplete="off" value="position"
										onclick="prefs('sort',this.value)">Posizione
								</label>
							</div>
						</div>
						<div class="form-group row">
							<div class="col-6">Stile di indicizzazione:</div>
							<div id="formStyleGroup" class="btn-group col-5 btn-group-toggle" data-toggle="buttons"
								role="group" aria-label="Choose Style">
								<label class="btn btn-primary" id="pref-KWIC">
									<input type="radio" name="style" autocomplete="off" value="KWIC"
										onclick="prefs('style',this.value)">KWIC
								</label>
								<label class="btn btn-primary" id="pref-KWOC">
									<input type="radio" name="style" autocomplete="off" value="KWOC"
										onclick="prefs('style',this.value)">KWOC
								</label>
								<label class="btn btn-primary" id="pref-KWAC">
									<input type="radio" name="style" autocomplete="off" value="KWAC"
										onclick="prefs('style',this.value)">KWAC
								</label>
							</div>
						</div>
						<div class="form-group row">
							<label for="formControlRange" class="col-6">Numero di parole contestuali:</label>
							<input type="number" class="form-control col-5" id="WordsAroundControl" min="0" value="5"
								onchange="prefs('wordsaround',this.value)">
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">Ok</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="EntityUpload" tabindex="-1" role="dialog" aria-labelledby="EntityUploadLabel"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="EntityUploadLabel">Carica entità</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<p>Seleziona un file locale contenente una lista di entità in JSON o in CSV</p>
					<input type="file" id="entityFiles" name="entityFiles" />
					<p id="entityList"></p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">Annulla</button>
					<button type="button" id="importEntities" class="btn btn-primary" data-dismiss="modal"
						onclick="addEntities()" disabled>Importa entità</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="FileUpload" tabindex="-1" role="dialog" aria-labelledby="FileUploadLabel"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="FileUploadLabel">Carica documento</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div id="msg-upload" class="alert" role="alert" style="display:none"></div>
					<p><label for="docFile">Seleziona una o più opere in formato <code>.docx</code> (<b style="color: #017BFE">Word</b>) o <code>.html</code> indicando la sezione, il volume e il tomo di appartenenza.</label>
					</p>
					<form>
						<div id ="filePath" class="fileParams form-row">
							<div class="col">
								<label for="sezNumber">Sezione</label>
								<input type="number" id="sezNumber" name="sezNumber" min="1" max="2" required />						
							</div>
							<div class="col">
								<label for="volNumber">Volume</label>
								<input type="number" id="volNumber" name="volNumber" min="1" max="4" required />						
							</div>
							<div class="col">
								<label for="tomNumber">Tomo</label>
								<input type="number" id="tomNumber" name="tomNumber" min="1" max="2" required />						
							</div>
						</div>
						<div id="fileFormat" class="fileParams pt-2 form-row">
							<div class="col">
								<span>Formato documento:</span>
								<div class="form-check form-check-inline">
									<input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio_docx" value="docx">
									<label class="form-check-label" for="inlineRadio_docx">.docx (Word)</label>
								  </div>
								  <div class="form-check form-check-inline">
									<input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio_html" value="html">
									<label class="form-check-label" for="inlineRadio_html">.html</label>
								  </div>
							</div>
						</div>
					</form>
					<hr>
					<input type="file" id="docFile" name="docFile" style="padding-bottom: 1em;"disabled multiple />
					<div>
						<ul id="doc-list" class="list-group list-group-flush overflow-auto">						
						</ul>			
						</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" onclick="emptyUpload()">Annulla</button>
					<button type="button" id="uploadFile" class="btn btn-primary"
						onclick="uploadDoc(uploadHTML,uploadDOCX)" disabled>Carica file</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="Login" tabindex="-1" role="dialog" aria-labelledby="LoginLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header text-center">
					<h5 class="modal-title" id="LoginLabel">Accedi</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<p>Inserisci il nome utente e la password per apportare modifiche.</p>
					<p style="color:red" id="error">
					</p>
					<div class="md-form mb-5">
						<label data-error="wrong" data-success="right" for="usernameForm"></label>
						<input type="text" id="usernameForm" class="form-control validate" placeholder="username">
					</div>
					<div class="md-form mb-4">
						<input type="password" id="defaultForm-pass" class="form-control validate"
							placeholder="password">
						<label data-error="wrong" data-success="right" for="defaultForm-pass"></label>
					</div>
				</div>
				<div class="modal-footer d-flex justify-content-center">
					<button type="button" id="login-button" class="btn btn-primary" onClick="login()">Accedi</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="add-metadata" tabindex="-1" role="dialog" aria-labelledby="addMetadata"
		aria-hidden="true">
	</div>

	<!-- TEMPLATES -->
<template id="metadataTpl">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="addMetadata">Aggiungi Metadati</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<h6 class="pb-3" id="addMetadata-sub"></h6>
				<form>
					<div id="msg" class="alert" role="alert" style="display:none"></div>
					<div class="form-group">
						<label for="ident">Numero del documento *</label><br>
						<small style="margin-bottom: 10px;" class="form-text text-muted">Un numero di tre cifre
							compreso tra 001 e 999, assegnato ai documenti in ordine crescente. Esempi:
							<samp>001</samp>, <samp>022</samp>, <samp>156</samp>...</small>
						<input type="text" class="form-control" id="ident" aria-describedby="id-metadata" value="{$ident}">
					</div>
					<div class="form-group role-group">
						<label>Ruolo dell'autore *</label>
						<button style="float:right" type="button"
							class="btn btn-primary btn-sm" onclick="addRole()"><i class="fa fa-plus"
								aria-hidden="true"></i>
							</button>
						<small style="margin-bottom: 10px;" class="form-text text-muted">Il ruolo o incarico
							istituzionale ricoperto in quel momento dall'autore del documento. Cliccando sull'icona
							<i class="fa fa-plus" aria-hidden="true"></i> è possibile aggiungere ulteriori
							ruoli.</small>
						<input name="role" list="roles" class="form-control role" aria-describedby="author-role-metadata">
						<datalist id="roles">
							<option class="role-option" value="Delegato Aspirante della Gioventù Cattolica" data-value="role.01">
							<option class="role-option" value="Studente" data-value="role.02"><option class="role-option" value="Membro della FUCI" data-value="role.03"><option class="role-option" value="Presidente del circolo di Bari della FUCI" data-value="role.04"><option class="role-option" value="Assistente volontario alla cattedra di diritto e procedura penale" data-value="role.05"><option class="role-option" value="Presidente nazionale della FUCI" data-value="role.06"><option class="role-option" value="Professore di Filosofia del Diritto" data-value="role.07"><option class="role-option" value="Membro del Movimento Laureati dell'Azione Cattolica" data-value="role.08"><option class="role-option" value="Membro dell'Ufficio stampa del governo Badoglio" data-value="role.09"><option class="role-option" value="Giornalista e commentatore politico" data-value="role.10"><option class="role-option" value="Presidente del Comitato direttivo provvisorio per la FUCI meridionale" data-value="role.11"><option class="role-option" value="Segretario Centrale del Movimento Laureati dell'Azione Cattolica" data-value="role.12"><option class="role-option" value='Direttore di "Studium"' data-value="role.13"><option class="role-option" value="Membro dell'Assemblea Costituente" data-value="role.14"><option class="role-option" value="Vicepresidente del gruppo democristiano alla Costituente" data-value="role.15"><option class="role-option" value="Membro della Camera dei Deputati" data-value="role.16"><option class="role-option" value="Sottosegretario al ministero degli Affari Esteri con delega per l'Emigrazione" data-value="role.17"><option class="role-option" value="Membro dell'Unione Giuristi Cattolici" data-value="role.18"><option class="role-option" value="Membro di Iniziativa Democratica" data-value="role.19"><option class="role-option" value="Professore di diritto penale" data-value="role.20"><option class="role-option" value="Professore di diritto e procedura penale" data-value="role.21"><option class="role-option" value="Membro della Comissione parlamentare di esame del disegno di legge relativo" data-value="role.22"><option class="role-option" value="Presidente del gruppo DC alla Camera" data-value="role.23"><option class="role-option" value="Ministro di Grazia e Giustizia" data-value="role.24"><option class="role-option" value="Consigliere nazionale della DC" data-value="role.25"><option class="role-option" value="Ministro della Pubblica Istruzione" data-value="role.26"><option class="role-option" value="Segretario politico della DC" data-value="role.27"><option class="role-option" value="Presidente del Consiglio" data-value="role.28"><option class="role-option" value="Titolare ad interim del ministero degli Esteri" data-value="role.29"><option class="role-option" value="Ministero degli Esteri" data-value="role.30"><option class="role-option" value="Presidente della Commissione Affari Esteri della Camera" data-value="role.31"><option class="role-option" value="Presidente di turno della Comunità Europea" data-value="role.32"><option class="role-option" value="Presidente del Consiglio Nazionale della DC" data-value="role.33"></datalist>
					</div>
					<div class="form-group">
						<label for="curator">Ricercatore curatore *</label>
						<small style="margin-bottom: 10px;" class="form-text text-muted">Il nome completo (Nome
							Cognome) del ricercatore che ha curato la trascrizione e marcatura del documento.
							Esempio: <samp>Mario Rossi</samp>.</small>
						<input type="text" class="form-control" id="curator" aria-describedby="curator-metadata" value="{$curator}">
					</div>
					<div class="form-group">
						<label for="abstract">Abstract *</label>
						<small style="margin-bottom: 10px;" class="form-text text-muted">Una descrizione generale
							del documento che ne riassume i contenuti e che lo contestualizza all'interno
							dell'universo biografico di Aldo Moro. Per un esempio di abstract, vedi la sezione <strong>La strutturazione formale dell'opera</strong> nelle Linee Guida.</small>
						<textarea type="text" class="form-control" id="abstract"
							aria-describedby="abstract-metadata" rows="3">{$abstract}</textarea>
					</div>
					<div class="form-group doctype-group">
						<label>Tipologia del documento *</label><button style="float:right" type="button"
							class="btn btn-primary btn-sm" onclick="addDoctype()"><i class="fa fa-plus"
								aria-hidden="true"></i></button>
						<small style="margin-bottom: 10px;" class="form-text text-muted">La tipologia testuale che
							caratterizza il documento. Cliccando sull'icona <i class="fa fa-plus"
								aria-hidden="true"></i> è possibile aggiungere ulteriori tipologie.</small>
						<select name="doctype" id="doctype" class="form-control doctype" aria-describedby="doctype-metadata">
							<option hidden disabled selected value>Scegli una tipologia...</option>
							<option class="doctype-option" value="doctype.01">Articolo su periodico</option>
							<option class="doctype-option" value="doctype.02">Articolo su quotidiano</option>
							<option class="doctype-option" value="doctype.03">Comunicato stampa</option>
							<option class="doctype-option" value="doctype.04">Discorso in sede pubblica / Comizio
							</option>
							<option class="doctype-option" value="doctype.05">Documento interno</option>
							<option class="doctype-option" value="doctype.06">Intervento di partito</option>
							<option class="doctype-option" value="doctype.07">Intervento in sede parlamentare
							</option>
							<option class="doctype-option" value="doctype.08">Intervento istituzionale</option>
							<option class="doctype-option" value="doctype.09">Intervento radiofonico/televisivo
							</option>
							<option class="doctype-option" value="doctype.10">Intervista</option>
							<option class="doctype-option" value="doctype.11">Lezione universitaria</option>
							<option class="doctype-option" value="doctype.12">Libro/intervento in libro</option>
							<option class="doctype-option" value="doctype.13">Opuscolo</option>
						</select>
					</div>
					<div class="form-group doctopic-group">
						<label>Tematica del documento *</label><button style="float:right" type="button"
							class="btn btn-primary btn-sm" onclick="addDoctopic()"><i class="fa fa-plus"
								aria-hidden="true"></i></button>
						<small style="margin-bottom: 10px;" class="form-text text-muted">La tematica generale
							presente nel testo del documento. Cliccando sull'icona <i class="fa fa-plus"
								aria-hidden="true"></i> è possibile aggiungere ulteriori tematiche.</small>
						<select name="doctopic" id="doctopic" class="form-control doctopic" aria-describedby="doctopic-metadata">
							<option hidden disabled selected value>Scegli una tematica...</option>
							<option class="doctopic-option" value="doctopic.01">Chiesa</option>
							<option class="doctopic-option" value="doctopic.02">Cultura/Istruzione</option>
							<option class="doctopic-option" value="doctopic.03">Diritto</option>
							<option class="doctopic-option" value="doctopic.04">Partito</option>
							<option class="doctopic-option" value="doctopic.05">Politica interna</option>
							<option class="doctopic-option" value="doctopic.06">Politica internazionale</option>
							<option class="doctopic-option" value="doctopic.07">Religione</option>
							<option class="doctopic-option" value="doctopic.08">Società</option>
							<option class="doctopic-option" value="doctopic.09">Stato</option>
							<option class="doctopic-option" value="doctopic.10">Vita locale</option>
						</select>
					</div>
					<div class="form-group">
						<label for="docstatus">Stato del documento *</label>
						<small style="margin-bottom: 10px;" class="form-text text-muted">Lo stato in cui il
							documento si trova in relazione alla sua pubblicazione. A seconda della voce selezionata
							(<samp>Edito</samp> o <samp>Inedito</samp>), è possibile inserire informazioni
							metadatali differenti.</small>
						<div id="docstatus">
							<div class="form-check form-check-inline">
								<input class="form-check-input docstatus" type="radio" name="docstatus"
									id="inlineRadio1" value="published" onchange="hideUnpublished(this)">
								<label class="form-check-label" for="inlineRadio1">Edito</label>
							</div>
							<div class="form-check form-check-inline">
								<input class="form-check-input docstatus" type="radio" name="docstatus"
									id="inlineRadio2" value="unpublished" onchange="hidePublished(this)">
								<label class="form-check-label" for="inlineRadio2">Inedito</label>
							</div>
						</div>
					</div>
					<div id="pubMetadata" hidden=true>
						<div class="form-group bibsource-group">
							<label>Riferimento bibliografico *</label><button style="float:right" type="button"
								class="btn btn-primary btn-sm" onclick="addBibsource()"><i class="fa fa-plus"
									aria-hidden="true"></i></button>
							<small style="margin-bottom: 10px;" class="form-text text-muted">Stringa catalografica
								di una fonte secondaria. Cliccando sull'icona <i class="fa fa-plus"
									aria-hidden="true"></i> è possibile aggiungere ulteriori stringhe. Esempio:
								<samp>«La Rassegna», II, 1944, n. 1, 4 gennaio, p. 1</samp>.</small>
							<input type="text" class="form-control bibsource provenance"
								aria-describedby="bibsource-metadata">
						</div>
					</div>
					<div id="unpubMetadata" hidden=false>
						<div class="form-group archsource-group">
							<label>Segnatura archivistica *</label><button style="float:right" type="button"
								class="btn btn-primary btn-sm" onclick="addArchsource()"><i class="fa fa-plus"
									aria-hidden="true"></i></button>
							<small style="margin-bottom: 10px;" class="form-text text-muted">Stringa catalografica
								di una fonte primaria. Cliccando sull'icona <i class="fa fa-plus"
									aria-hidden="true"></i> è possibile aggiungere ulteriori stringhe. Esempio:
								<samp>Discorso conclusivo dell’on. Moro al convegno dei dirigenti del partito (3 luglio 1959), in ACS, Archivio Aldo Moro 1953-1978, Busta 1, fascicolo 3, dattiloscritto s.d.</samp>.</small>
							<input type="text" class="form-control archsource provenance"
								aria-describedby="archsource-metadata">
						</div>
					</div>
					<div class="form-group event-place-group">
						<label for="event-place">Luogo dell'evento</label><button id="ep-button" style="float:right"
							type="button" class="btn btn-primary btn-sm" onclick="addEventPlace()"><i
								class="fa fa-plus" aria-hidden="true"></i></button>
						<small style="margin-bottom: 10px;" class="form-text text-muted">Il luogo in cui è avvenuto
							l'evento descritto nel documento. Cliccando sull'icona <i class="fa fa-plus"
								aria-hidden="true"></i> è possibile inserire il metadato. Esempio: il luogo
							originario in cui Moro ha tenuto il discorso successivamente riportato nel
							documento.</small>
					</div>
					<div class="form-group event-date-group">
						<label for="event-date">Data dell'evento</label><button id="ed-button" style="float:right"
							type="button" class="btn btn-primary btn-sm" onclick="addEventDate()"><i
								class="fa fa-plus" aria-hidden="true"></i></button>
						<small style="margin-bottom: 10px;" class="form-text text-muted">La data in cui è avvenuto
							l'evento descritto nel documento. Cliccando sull'icona <i class="fa fa-plus"
								aria-hidden="true"></i> è possibile inserire il metadato. Esempio: l'anno o il giorno originario
							in cui Moro ha tenuto il discorso successivamente riportato nel documento.</small>
					</div>
					<div class="form-group">
						<label for="additional-notes">Note aggiuntive</label>
						<small style="margin-bottom: 10px;" class="form-text text-muted">Ulteriori osservazioni su
							aspetti del documento che non sono stati trattati nelle voci precedenti e che reputi
							importante segnalare.</small>
						<textarea type="text" class="form-control" id="additional-notes"
							aria-describedby="additionalnotes-metadata" rows="3">{$additionalNotes}</textarea>
					</div>
				</form>
				<small>
					* campo obbligatorio
				</small>
			</div>
			<div class='modal-footer'>
				<button type="button" id="save-metadata" class="btn btn-primary" onclick="saveMetadata()">Salva</button>
			</div>
		</div>
	</div>
</template>
	<template id="referenceTpl0">
		<li class="nav-item dropPoint" sid="{$id}-tab" data-level="reference" data-id="{$id}">
			<a class="nav-link" id="{$id}-tab" data-toggle="tab" href="#{$id}-pane" role="tab" aria-controls="{$id}">
				{$label} ({$count})
			</a>
		</li>
	</template>
	<template id="referenceTpl1">
		<div class="tab-pane scroll-always ug-border ug-border-notop h-100 dropPoint" id="{$id}-pane" role="tabpanel"
			aria-labelledby="{$id}-tab" data-level="reference" data-id="{$id}">
			<ul class="categoryContainer tree">
				{$content}
			</ul>
		</div>
	</template>
	<template id="citationTpl">
		<li class="citationContainer draggable dropPoint" id="citation-{$id}" data-level="citation" data-id="{$id}">
			<a href="#"
				class="d-inline-flex flex-nowrap align-items-center justify-content-between rounded bg-light w-100 treeExpand">
				<span class="citationLabel">{$label}</span>
				<span class="d-inline-flex flex-nowrap mr-0">
					<span class="badge badge-primary em3">{$count}</span>
					<span class="badge badge-secondary px-2 editOnly" data-toggle="collapse" data-target="#{$id}-menu"
						role="button" aria-expanded="false" aria-controls="{$id}-menu">
						<span class="oi oi-plus"></span>
					</span>
				</span>
			</a>
			<div class="collapse card citationCard" id="{$id}-menu">
				<h6 class="card-header" data-toggle="collapse" data-target="#{$id}-menu" role="button"
					aria-expanded="false" aria-controls="{$id}-menu">
					Dettagli su {$label}
				</h6>
				<div class="card-body">
					<form>
						<div class="row">
							<label for="labelData-{$id}" class="col-4 small p-1">Etichetta: </label>
							<input type="text" name="labelData" class="form-control form-control-sm col-8"
								id="labelData-{$id}" onchange="changeValue('label','{$id}', this.value)"
								value="{$label}">
						</div>
						<div class="row">
							<label for="sortData-{$id}" class="col-4 small p-1">Ordina valore: </label>
							<div class="col-8 p-0">
								<div class="input-group mb-2">
									<input type="text" name="sortData-{$id}"
										class="form-control form-control-sm flex-grow-1" id="sortData-{$id}"
										onchange="changeValue('sort','{$id}', this.value)" value="{$sort}">
									<div class="input-group-append small">
										<div class="input-group-text">
											<span class="oi oi-loop-circular"
												onclick="invertValue('{$id}','{$type}','#sortData-{$id}')"></span>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<label for="sortData-{$id}" class="col-4 small p-1">Nota: </label>
							<input type="text" name="footnoteText" class="form-control form-control-sm col-8"
								id="footnoteText-{$id}" value="{$footnoteText}" disabled>
						</div>
					</form>
				</div>
			</div>
			<ul>
				{$content}
			</ul>
		</li>
	</template>
	<template id="quoteTpl">
		<div class="{$style} draggable popoverToggle-mentions {$class}" id="list-{$id}" data-level="quote"
			data-id="{$id}" onclick="goto('#{$id}')">
			{$content}
		</div>
	</template>
	<template id="citationTplbibref">
		<li class="citationContainer draggable dropPoint" id="{$id}" data-level="citation" data-id="{$id}">
			<a href="#"
				class="d-inline-flex flex-nowrap align-items-center justify-content-between rounded bg-light w-100 treeExpand">
				<span class="citationLabel">{$label}</span>
				<span class="d-inline-flex flex-nowrap mr-0">
					<span class="badge badge-primary em3">{$countBibrefs}</span>
					<span class="badge badge-secondary px-2 editOnly" data-toggle="collapse" data-target="#{$id}-menu"
						role="button" aria-expanded="false" aria-controls="{$id}-menu">
						<span class="oi oi-plus"></span>
					</span>
				</span>
			</a>
			<div class="collapse card citationCard" id="{$id}-menu">
				<h6 class="card-header" data-toggle="collapse" data-target="#{$id}-menu" role="button"
					aria-expanded="false" aria-controls="{$id}-menu">
					Dettagli su {$label}
				</h6>
				<div class="card-body">
					<form>
						<div class="row">
							<label for="labelData-{$id}" class="col-4 small p-1">Etichetta: </label>
							<input type="text" name="labelData" class="form-control form-control-sm col-8"
								id="labelData-{$id}" onchange="changeValue('label','{$id}', this.value)"
								value="{$label}">
						</div>
						<div class="row">
							<label for="sortData-{$id}" class="col-4 small p-1">Ordina valore: </label>
							<div class="col-8 p-0">
								<div class="input-group mb-2">
									<input type="text" name="sortData-{$id}"
										class="form-control form-control-sm flex-grow-1" id="sortData-{$id}"
										onchange="changeValue('sort','{$id}', this.value)" value="{$sort}">
									<div class="input-group-append small">
										<div class="input-group-text">
											<span class="oi oi-loop-circular"
												onclick="invertValue('{$id}','{$type}','#sortData-{$id}')"></span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</form>
				</div>
			</div>
			<ul>
				{$content}
			</ul>
		</li>
	</template>
	<template id="bibrefTpl">
		<div class="{$style} draggable popoverToggle-mentions {$class}" id="list-{$id}" data-level="bibref"
			data-id="{$id}" onclick="goto('#{$id}')">
			{$content}
		</div>
	</template>

	<template id="categoryTpl0">
		<li class="nav-item dropPoint" sid="{$id}-tab" data-level="category" data-id="{$id}">
			<a class="nav-link" id="{$id}-tab" data-toggle="tab" href="#{$id}-pane" role="tab" aria-controls="{$id}">
				{$label} ({$count})
			</a>
		</li>
	</template>
	<template id="categoryTpl1">
		<div class="tab-pane scroll-always ug-border ug-border-notop h-100 dropPoint" id="{$id}-pane" role="tabpanel"
			aria-labelledby="{$id}-tab" data-level="category" data-id="{$id}">
			<ul class="categoryContainer tree">
				{$content}
			</ul>
		</div>
	</template>
	<template id="entityTpl">
		<li class="entityContainer draggable dropPoint" id="{$id}" data-level="entity" data-id="{$id}">
			<a href="#"
				class="d-inline-flex flex-nowrap align-items-center justify-content-between rounded bg-light w-100 treeExpand">
				<span class="entityLabel">{$label}</span>
				<span class="d-inline-flex flex-nowrap mr-0">
					<span class="badge badge-light em3"><span class="oi {$check} text-success"></span></span>
					<span class="badge badge-primary em3">{$count}</span>
					<span class="badge badge-secondary px-2 editOnly" data-toggle="collapse" data-target="#{$id}-menu"
						role="button" aria-expanded="false" aria-controls="{$id}-menu">
						<span class="oi oi-plus"></span>
					</span>
				</span>
			</a>
			<div class="collapse card entityCard" id="{$id}-menu">
				<h6 class="card-header" data-toggle="collapse" data-target="#{$id}-menu" role="button"
					aria-expanded="false" aria-controls="{$id}-menu">
					Dettagli su {$label}
				</h6>
				<div class="card-body">
					<form>
						<div class="row">
							<label for="labelData-{$id}" class="col-4 small p-1">Etichetta: </label>
							<input type="text" name="labelData" class="form-control form-control-sm col-8"
								id="labelData-{$id}" onchange="changeValue('label','{$id}', this.value)"
								value="{$label}">
						</div>
						<div class="row">
							<label for="sortData-{$id}" class="col-4 small p-1">Ordina valore: </label>
							<div class="col-8 p-0">
								<div class="input-group mb-2">
									<input type="text" name="sortData-{$id}"
										class="form-control form-control-sm flex-grow-1" id="sortData-{$id}"
										onchange="changeValue('sort','{$id}', this.value)" value="{$sort}">
									<div class="input-group-append small">
										<div class="input-group-text">
											<span class="oi oi-loop-circular"
												onclick="invertValue('{$id}','{$type}','#sortData-{$id}')"></span>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<label for="wikiData-{$id}" class="col-4 small p-1">Wikidata ID: </label>
							<div class="col-8 p-0">
								<div class="input-group mb-2">
									<input type="text" name="wikiData-{$id}"
										class="form-control form-control-sm flex-grow-1" id="wikiData-{$id}"
										onchange="changeValue('wikidataId','{$id}', this.value)" value="{$wikidataId}">
									<div class="input-group-append small">
										<div class="input-group-text">
											<span class="oi oi-magnifying-glass popoverToggle" id="popoverToggle-{$id}"
												data-label="{$label}" data-id="{$id}"></span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</form>
				</div>
			</div>
			<ul>
				{$content}
			</ul>
		</li>
	</template>
	<template id="mentionTpl">
		<div class="{$style} draggable popoverToggle-mentions rs {$rs} {$class}" id="list-{$id}" data-level="mention"
			data-id="{$id}" onclick="goto('#{$id}')">
			{$content}
		</div>
	</template>

	<!-- Bootstrap core JavaScript
		================================================== -->
	<script src="//code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
		crossorigin="anonymous"></script>
	<script src="//cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
		integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
		crossorigin="anonymous"></script>
	<script src="//stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
		integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
		crossorigin="anonymous"></script>
	<script src="//gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
	<script src="/util.js"></script>
	<script src="/kwic.js"></script>
	<script src="/script.js"></script>
	<script src="./auth.js"></script>
</body>

</html>